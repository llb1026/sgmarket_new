!function(e){e.fn.disableSelection_dropotron=function(){return e(this).css("user-select","none").css("-khtml-user-select","none").css("-moz-user-select","none").css("-o-user-select","none").css("-webkit-user-select","none")},e.fn.dropotron=function(t){if(0==this.length)return e(this);if(this.length>1)for(var n=0;n<this.length;n++)e(this[n]).dropotron(t);return e.dropotron(e.extend({selectorParent:e(this)},t))},e.dropotron=function(t){var n=e.extend({selectorParent:null,baseZIndex:1e3,menuClass:"dropotron",expandMode:"hover",hoverDelay:150,hideDelay:250,openerClass:"opener",openerActiveClass:"active",submenuClassPrefix:"level-",mode:"fade",speed:"fast",easing:"swing",alignment:"left",offsetX:0,offsetY:0,globalOffsetY:0,IEOffsetX:0,IEOffsetY:0,noOpenerFade:!0,detach:!0,cloneOnDetach:!0},t),i=n.selectorParent,o=i.find("ul"),r=e("body"),a=e("body,html"),s=e(window),l=!1,c=null,d=null;i.on("doCollapseAll",function(){o.trigger("doCollapse")}),o.each(function(){var t=e(this),i=t.parent();n.hideDelay>0&&t.add(i).on("mouseleave",function(){window.clearTimeout(d),d=window.setTimeout(function(){t.trigger("doCollapse")},n.hideDelay)}),t.disableSelection_dropotron().hide().addClass(n.menuClass).css("position","absolute").on("mouseenter",function(){window.clearTimeout(d)}).on("doExpand",function(){if(t.is(":visible"))return!1;window.clearTimeout(d),o.each(function(){var t=e(this);e.contains(t.get(0),i.get(0))||t.trigger("doCollapse")});var r,a,c,u,f=i.offset(),h=i.position(),m=(i.parent().position(),i.outerWidth()),g=t.outerWidth(),p=t.css("z-index")==n.baseZIndex;if(p){switch(r=n.detach?f:h,u=r.top+i.outerHeight()+n.globalOffsetY,a=n.alignment,t.removeClass("left").removeClass("right").removeClass("center"),n.alignment){case"right":c=r.left-g+m,0>c&&(c=r.left,a="left");break;case"center":c=r.left-Math.floor((g-m)/2),0>c?(c=r.left,a="left"):c+g>s.width()&&(c=r.left-g+m,a="right");break;case"left":default:c=r.left,c+g>s.width()&&(c=r.left-g+m,a="right")}t.addClass(a)}else switch("relative"==i.css("position")||"absolute"==i.css("position")?(u=n.offsetY,c=-1*h.left):(u=h.top+n.offsetY,c=0),n.alignment){case"right":c+=-1*i.parent().outerWidth()+n.offsetX;break;case"center":case"left":default:c+=i.parent().outerWidth()+n.offsetX}navigator.userAgent.match(/MSIE ([0-9]+)\./)&&RegExp.$1<8&&(c+=n.IEOffsetX,u+=n.IEOffsetY),t.css("left",c+"px").css("top",u+"px").css("opacity","0.01").show();var E=!1;switch(c="relative"==i.css("position")||"absolute"==i.css("position")?-1*h.left:0,t.offset().left<0?(c+=i.parent().outerWidth()-n.offsetX,E=!0):t.offset().left+g>s.width()&&(c+=-1*i.parent().outerWidth()-n.offsetX,E=!0),E&&t.css("left",c+"px"),t.hide().css("opacity","1"),n.mode){case"zoom":l=!0,i.addClass(n.openerActiveClass),t.animate({width:"toggle",height:"toggle"},n.speed,n.easing,function(){l=!1});break;case"slide":l=!0,i.addClass(n.openerActiveClass),t.animate({height:"toggle"},n.speed,n.easing,function(){l=!1});break;case"fade":if(l=!0,p&&!n.noOpenerFade){var E;E="slow"==n.speed?80:"fast"==n.speed?40:Math.floor(n.speed/2),i.fadeTo(E,.01,function(){i.addClass(n.openerActiveClass),i.fadeTo(n.speed,1),t.fadeIn(n.speed,function(){l=!1})})}else i.addClass(n.openerActiveClass),i.fadeTo(n.speed,1),t.fadeIn(n.speed,function(){l=!1});break;case"instant":default:i.addClass(n.openerActiveClass),t.show()}return!1}).on("doCollapse",function(){return!!t.is(":visible")&&(t.hide(),i.removeClass(n.openerActiveClass),t.find("."+n.openerActiveClass).removeClass(n.openerActiveClass),t.find("ul").hide(),!1)}).on("doToggle",function(){return t.is(":visible")?t.trigger("doCollapse"):t.trigger("doExpand"),!1}),i.disableSelection_dropotron().addClass("opener").css("cursor","pointer").on("click touchend",function(e){l||(e.preventDefault(),e.stopPropagation(),t.trigger("doToggle"))}),"hover"==n.expandMode&&i.hover(function(){l||(c=window.setTimeout(function(){t.trigger("doExpand")},n.hoverDelay))},function(){window.clearTimeout(c)})}),o.find("a").css("display","block").on("click touchend",function(t){l||e(this).attr("href").length<1&&t.preventDefault()}),i.find("li").css("white-space","nowrap").each(function(){var t=e(this),n=t.children("a"),o=t.children("ul"),r=n.attr("href");n.on("click touchend",function(e){0==r.length||"#"==r?e.preventDefault():e.stopPropagation()}),n.length>0&&0==o.length&&t.on("click touchend",function(e){l||(i.trigger("doCollapseAll"),e.stopPropagation())})}),i.children("li").each(function(){var t,i=e(this),o=i.children("ul");if(o.length>0){n.detach&&(n.cloneOnDetach&&(t=o.clone(),t.attr("class","").hide().appendTo(o.parent())),o.detach().appendTo(r));for(var a=n.baseZIndex,s=1,l=o;l.length>0;s++)l.css("z-index",a++),n.submenuClassPrefix&&l.addClass(n.submenuClassPrefix+(a-1-n.baseZIndex)),l=l.find("> li > ul")}}),s.on("scroll",function(){i.trigger("doCollapseAll")}).on("keypress",function(e){l||27!=e.keyCode||(e.preventDefault(),i.trigger("doCollapseAll"))}),a.on("click touchend",function(){l||i.trigger("doCollapseAll")})}}(jQuery);